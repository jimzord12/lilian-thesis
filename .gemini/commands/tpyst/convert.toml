description = "Convert a specific chapter from Markdown to Typst format"

prompt="""
# Markdown to Typst Conversion Workflow

@{docs/AI-related/agents/tpyst-master/identity.md}
@{docs/file-system-conventions/05-typst.md}

You are tasked with converting Chapter {{args}} from its final Greek Markdown source to a compile-ready Typst file.

## Source and Destination
- **Source**: `chapters/Chapter-{{args}}/gr/Chapter-{{args}}-Final-no-refs.md`
- **Destination**: `typst/content/chapters/chapter{{args}}.typ`

## Conversion Rules
1. **Headings**: Map Markdown `#` levels to Typst `=` levels.
   - `# Chapter N` -> `= Title`
   - `## Section` -> `== Section`
   - `### Sub-section` -> `=== Sub-section`
2. **Figures**: Use the `#figure` function.
   - Format: `#figure(image("../assets/images/S[Section]/[ID]/image.png", width: 80%), caption: [Greek Caption]) <fig-N-M>`
   - Ensure the image path matches the convention in `typst/assets/images/`.
3. **Tables**: Convert Markdown tables to native Typst `#table` blocks.
   - Match the number of columns and include appropriate alignments/insets.
   - Use `#figure(table(...), caption: [...]) <table-N-M>` for numbered tables.
4. **Lists and Emphasis**: Convert `-` or `*` to Typst list items and `**bold**` to `*bold*`.
5. **Citations**: Keep the in-text citations exactly as they appear in the source (e.g., `(Author et al., 2025)`).
6. **Integrity**: DO NOT skip any text. The Typst file must contain the exact same content as the Markdown source.

## Common Pitfalls
- The Sections' Indexing must be removed from headings, as it is handled automatically in Typst.

## Finalization
- After creating the file, check `typst/main.typ`.
- If `#include "content/chapters/chapter{{args}}.typ"` is missing or commented out, add/uncomment it to ensure the chapter is included in the final compilation.
- Confirm that everything is OK by running a Typst build, you can use this script: `.gemini/scripts/compile_typst.sh`.
"""
